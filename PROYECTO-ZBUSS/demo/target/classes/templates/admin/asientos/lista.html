<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Gesti√≥n de Asientos | Admin ZBUSS</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-4">
  <h2>ü™ë Asientos por Ruta y Horario</h2>

  <form class="row g-3 mb-4" method="get" th:action="@{/admin/asientos}">
    <div class="col-md-5">
      <label for="rutaId" class="form-label">Ruta</label>
      <select class="form-select" id="rutaId" name="rutaId" required onchange="this.form.submit()">
        <option value="">-- Selecciona una Ruta --</option>
        <option th:each="r : ${rutas}" 
                th:value="${r.idRuta}" 
                th:selected="${rutaIdSeleccionada == r.idRuta}" 
                th:text="${r.origen + ' ‚Üí ' + r.destino}">Ruta</option>
      </select>
    </div>

    <div class="col-md-5">
      <label for="horarioId" class="form-label">Horario</label>
      <select class="form-select" id="horarioId" name="horarioId" required th:disabled="${horarios == null}">
        <option value="">-- Selecciona un Horario --</option>
        <option th:each="h : ${horarios}" 
                th:value="${h.idHorario}" 
                th:selected="${horarioIdSeleccionado == h.idHorario}" 
                th:text="${#dates.format(h.fechaHoraSalida, 'dd/MM/yyyy HH:mm')}">Horario</option>
      </select>
    </div>

    <div class="col-md-2 d-flex align-items-end">
      <button type="submit" class="btn btn-primary w-100">Ver Asientos</button>
    </div>
  </form>

  <div th:if="${asientos != null}">
    <div class="row">
      <div th:each="asiento : ${asientos}" class="col-2 mb-3">
        <div th:class="'p-3 border rounded text-center ' + (asiento.ocupado ? 'bg-danger text-white' : 'bg-success text-white')">
          <strong th:text="${asiento.numero}">A1</strong><br>
          <small th:text="${asiento.ocupado ? 'Reservado' : 'Libre'}">Estado</small>
        </div>
      </div>
    </div>
  </div>

  <a th:href="@{/admin}" class="btn btn-secondary mt-4">‚Üê Volver al Panel</a>
</div>
</body>
</html>

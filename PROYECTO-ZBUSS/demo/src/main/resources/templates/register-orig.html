<!DOCTYPE html>

<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Registro - TZBUSS</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
    <link rel="stylesheet" th:href="@{/css/register.css}"></link>
</head>
<body>
<div class="main-container">
    <!-- Panel izquierdo: Formulario -->
    <div class="left-panel">
        <!-- Decoración de fondo -->
        <ul class="bg-bubbles">
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
        <div class="form-container">
            <div class="bus-icon-container">
                <i class="fas fa-bus bus-icon"></i>
            </div>
            <h2 class="mb-4 text-center text-primary">Registro de Usuario</h2>
            <!-- ... encabezado, head y estilos ... -->
            <form method="post" th:action="@{/register}" th:object="${usuario}">
                <!-- Información Personal -->
                <div class="section-title">Información Personal</div>

                <!-- Nombre -->
                <div class="mb-4">
                    <label class="form-label" for="nombre">Nombre completo</label>
                    <input class="form-control" id="nombre" name="nombre"
                        pattern="^[a-zA-ZÁÉÍÓÚáéíóúÑñ ]+$"
                        title="Solo letras y espacios"
                        placeholder="Ingrese su nombre completo" required
                        th:field="*{nombre}" type="text"/>
                    <div class="invalid-feedback">Solo se permiten letras y espacios.</div>
                </div>

                <div class="form-row mb-4">
                    <!-- Tipo de Documento -->
                    <div class="form-col">
                        <label class="form-label" for="tipoDocumento">Tipo de Documento</label>
                        <select class="form-select" id="tipoDocumento" name="tipoDocumento"
                                required th:field="*{tipoDocumento}">
                            <option disabled selected value="">Seleccione tipo</option>
                            <option value="DNI">DNI</option>
                            <option value="PASAPORTE">Pasaporte</option>
                            <option value="CARNET_EXTRANJERIA">Carné de extranjería</option>
                            <option value="RUC">RUC</option>
                        </select>
                        <div class="invalid-feedback">Seleccione un tipo de documento.</div>
                    </div>

                    <!-- Documento -->
                    <div class="form-col">
                        <label class="form-label" for="documento">Número de Documento</label>
                        <input class="form-control" id="documento" name="documento"
                            placeholder="Ingrese su documento" required
                            th:field="*{documento}" type="text"
                            pattern="\d{8,11}" maxlength="11"
                            title="DNI: 8 dígitos, RUC: 11 dígitos"/>
                        <div class="invalid-feedback">Solo se permiten 8 o 11 números sin letras.</div>
                    </div>

                    <!-- Razon Social (solo si es RUC) -->
                    <div class="mb-4" id="razonSocialDiv" style="display: none;">
                        <label class="form-label" for="razonSocial">Razón Social</label>
                        <input class="form-control" id="razonSocial" name="razonSocial"
                            placeholder="Ingrese su razón social"
                            th:field="*{razonSocial}" type="text"/>
                    </div>
                </div>

                <!-- Información de Contacto -->
                <div class="section-title">Información de Contacto</div>

                <!-- Correo -->
                <div class="mb-4">
                    <label class="form-label" for="correo">Correo electrónico</label>
                    <input class="form-control" id="correo" name="correo"
                        type="email" required
                        placeholder="ejemplo@dominio.com"
                        th:field="*{correo}"/>
                    <div class="invalid-feedback">Debe ser un correo válido.</div>
                </div>

                <!-- Teléfono -->
                <div class="mb-4">
                    <label class="form-label" for="telefono">Teléfono</label>
                    <input class="form-control" id="telefono" name="telefono"
                        type="tel" required
                        pattern="9\d{8}" maxlength="9"
                        placeholder="Ej. 987654321"
                        title="Debe comenzar con 9 y tener 9 dígitos"
                        th:field="*{telefono}"/>
                    <div class="invalid-feedback">Debe comenzar con 9 y tener 9 dígitos.</div>
                </div>

                <!-- Seguridad -->
                <div class="section-title">Seguridad</div>
                <div class="mb-4">
                    <label class="form-label" for="clave">Contraseña</label>
                    <div class="password-container">
                        <input class="form-control" id="clave" name="clave"
                            placeholder="Cree una contraseña segura" required
                            th:field="*{clave}" type="password"/>
                        <button class="password-toggle" id="togglePassword" type="button">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <!-- Fortaleza de contraseña -->
                    <div class="password-strength mt-2">
                        <div class="strength-meter" id="passwordStrength"></div>
                    </div>
                    <div class="password-requirements">
                        <div class="requirement" id="reqLength">
                            <i class="fas fa-circle"></i> Mínimo 8 caracteres
                        </div>
                        <div class="requirement" id="reqNumber">
                            <i class="fas fa-circle"></i> Al menos un número
                        </div>
                        <div class="requirement" id="reqLetter">
                            <i class="fas fa-circle"></i> Al menos una letra
                        </div>
                    </div>
                </div>

                <!-- Términos -->
                <div class="form-check mb-4">
                    <input class="form-check-input" id="terminos" type="checkbox" required/>
                    <label class="form-check-label" for="terminos">
                        Acepto los <a href="#">Términos</a> y <a href="#">Privacidad</a>
                    </label>
                    <div class="invalid-feedback">Debes aceptar los términos.</div>
                </div>

                <button class="btn btn-primary w-100 py-3 mt-2" type="submit">
                    <i class="fas fa-user-plus me-2"></i>Registrar Cuenta
                </button>
            </form>

            <!-- Enlace para redirigir al formulario de login -->
            <p class="mt-4 text-center footer-text">
                                ¿Ya tienes cuenta? <a class="text-decoration-none fw-bold" th:href="@{/login}">Inicia sesión aquí</a>
            </p>
        </div>
    </div>
    <!-- Panel derecho: Imagen corporativa -->
    <div class="right-panel">
        <!-- Decoración de fondo -->
        <ul class="bg-bubbles">
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
        <div class="brand-content">
            <div>
                <div class="brand-logo">TZBUSS</div>
                <div class="brand-slogan">Soluciones de transporte inteligente</div>
            </div>
            <div class="brand-circle">
                <i class="fas fa-bus" style="font-size: 4rem;"></i>
            </div>
            <ul class="brand-features">
                <li>
                    <span class="feature-icon">
                        <i class="fas fa-route"></i>
                    </span>
                    <span>Gestión avanzada de flotas de transporte</span>
                </li>
                <li>
                    <span class="feature-icon">
                        <i class="fas fa-map-marker-alt"></i>
                    </span>
                    <span>Seguimiento en tiempo real de vehículos</span>
                </li>
                <li>
                    <span class="feature-icon">
                        <i class="fas fa-clock"></i>
                    </span>
                    <span>Optimización de rutas y horarios</span>
                </li>
                <li>
                    <span class="feature-icon">
                        <i class="fas fa-chart-line"></i>
                    </span>
                    <span>Solución integral para empresas de transporte</span>
                </li>
                <li>
                    <span class="feature-icon">
                        <i class="fas fa-shield-alt"></i>
                    </span>
                    <span>Seguridad y confiabilidad garantizadas</span>
                </li>
            </ul>
        </div>
    </div>
</div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script th:src="@{/js/register.js}"></script>
    <script>
    document.addEventListener('DOMContentLoaded', function () {
        const tipoDocumento = document.getElementById('tipoDocumento');
        const razonDiv = document.getElementById('razonSocialDiv');
        const razonInput = document.getElementById('razonSocial');

        tipoDocumento.addEventListener('change', function () {
        if (this.value === 'RUC') {
            razonDiv.style.display = 'block';
            razonInput.setAttribute('required', 'required');
        } else {
            razonDiv.style.display = 'none';
            razonInput.removeAttribute('required');
        }
        });
    });
    </script>
</body>
</html>
